YUI.add("hermes-template-partner-account-modal",(function(e,t){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,a,n,r){return'<div>\n\tWith the launch of the new att.net homepage on June 30, 2017, you will need to change the primary email address you use to sign into your Flickr/Yahoo account. Your data and photos on Flickr will not be deleted or modified in any way. You will need to complete this process before June 30, 2017 in order to continue accessing your Flickr account.\n\t<br/><br/>\n\t<a href="/partner-account">Click here to learn more about these changes.</a>\n\t<br/><br/>\n\t<a href="/account/transfer">\n\t\t<button class="update-email">Update your email address</button>\n\t</a>\n</div>\n'},useData:!0}),n={};e.Array.each([],(function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)})),e.Template.register("hermes/partner-account-modal",(function(t,r){return(r=r||{}).partials=r.partials?e.merge(n,r.partials):n,a(t,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("partner-account-banner-view",(function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{buildContainer:function(){return this.setContainerWithTemplate("partner-account-banner"),this},activate:function(){var n=this.get("container").one(".learn-more");return n&&this.registerEventHandler(n.on("click",this.openModal.bind(this))),e.AnchorRepositioner.addOffset(t,this.get("container")),this},openModal:function(){new e.Views.FluidModal({title:"The way you sign in to Flickr is changing",htmlMessage:this.templates("partner-account-modal")({}),appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelX:!0,showCancelButton:!1,showActionButton:!1,hideModalOverlay:!1,showFooter:!1}).show()},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-partner-account-banner","hermes-template-partner-account-modal"]});YUI.add("hermes-template-featured-toast",(function(e,r){var t=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,r,t,a,n){var l=e.lookupProperty||function(e,r){if(Object.prototype.hasOwnProperty.call(e,r))return e[r]};return'<div class="featured-toast">\n\t'+e.escapeExpression((l(t,"renderTrustedMarkup")||r&&l(r,"renderTrustedMarkup")||e.hooks.helperMissing).call(null!=r?r:e.nullContext||{},null!=r?l(r,"htmlContent"):r,{name:"renderTrustedMarkup",hash:{},data:n,loc:{start:{line:2,column:1},end:{line:2,column:36}}}))+"\n</div>\n"},useData:!0}),a={};e.Array.each([],(function(r){var t=e.Template.get("hermes/"+r);t&&(a[r]=t)})),e.Template.register("hermes/featured-toast",(function(r,n){return(n=n||{}).partials=n.partials?e.merge(a,n.partials):a,t(r,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("featured-toast-view",(function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.config=t.featuredToastConfig||{},this.config.id=this.config.id||"",this.config.htmlContent=this.config.htmlContent||"",this.config.showOnActivate=void 0!==this.config.showOnActivate&&this.config.showOnActivate,this.config.classList=this.config.classList||[]},loadState:function(){return t.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("featured-toast",{htmlContent:this.config.htmlContent,classList:this.config.classList})},activate:function(){var i=this,n=this.get("container");return this.contentContainer=n.one(".featured-toast"),this.initialClasses=Array.prototype.slice.call(this.contentContainer.getDOMNode().classList),this.updateClasses(),this.setupEvents(),this.config.showOnActivate&&setTimeout((function(){i.show()}),0),setTimeout((function(){i.applyBannerOffset()}),100),this.registerEventHandler(t.on("resize",t.betterThrottle(this.applyBannerOffset.bind(this),500,this,!0))),this.fire("activated"),this},show:function(){this.get("container").addClass("activated")},dismiss:function(){var t=this.get("container");t.setStyle("bottom",null),t.removeClass("activated")},handlePrimaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("primaryActionClicked",{clickEvent:t})},handleSecondaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("secondaryActionClicked",{clickEvent:t})},applyBannerOffset:function(){var i,n=t.one(".footer-banner-view .footer-container");n&&(i=n.get("clientHeight"),this.get("container").setStyle("bottom",i))},setup:function(t){this.config.htmlContent=t.htmlContent||"",this.config.classList=t.classList||[],this.contentContainer.set("innerHTML",this.config.htmlContent),this.updateClasses(),this.setupEvents()},updateClasses:function(){var t=this;this.contentContainer.set("className",""),this.initialClasses.forEach((function(i){t.contentContainer.addClass(i)})),this.config.classList.forEach((function(i){t.contentContainer.addClass(i)}))},setupEvents:function(){var t=this.get("container"),i=t.one(".primary-action"),n=t.one(".secondary-action");i&&i.on("click",this.handlePrimaryActionClick.bind(this)),n&&n.on("click",this.handleSecondaryActionClick.bind(this))}})}),"@VERSION@",{requires:["flickr-view","hermes-template-featured-toast"]});YUI.add("photo-prints-helper",(function(e,r){var t=require("url-parse"),i=require("hermes-core/flog")(r),n=require("superagent"),s=e.mix({langBundles:["prints"]},e.Localizable),o={default:"prints.SOMETHING_WRONG_PREPARING_PRINT",4:"prints.UNSUPPORTED_FILE_TYPE_PLEASE_JPG"};e.PhotoPrintsHelper=function(r){var a=e.config.flickr.flickrprints.devBaseUrl,l=e.config.flickr.flickrprints.baseUrl,c=e.config.flickr.flickrprints.cartPath,p=e.config.flickr.flickrprints.devApiKey,u=e.config.flickr.flickrprints.apiKey;return{isPrintsEnabled:function(){return r.getViewer().signedIn||!r.getViewer().signedIn&&r.flipper.isFlipped("enable-others-to-print")},canPrintPhoto:function(e){return this.isPrintsEnabled()&&!e.getValue("isVideo")&&(e.getValue("isOwner")||r.flipper.isFlipped("enable-others-to-print")&&!e.getValue("isOwner")&&e.getValue("engagement").getValue("canPrint"))},registerPrint:function(t,i){var n=this;return r.callAPI("flickr.printservice.getRedirectURL",{user_id:t.getValue("owner").getValue("id"),photo_id:t.getValue("id"),return_url:i}).then((function(r){return n.isPrintUrlSafe(r.redirectURL)?{redirectURL:r.redirectURL}:e.Promise.reject({message:n.getRegisterPrintErrorCodeMessage()})})).catch((function(e){throw{message:n.getRegisterPrintErrorCodeMessage(e.code)}}))},isPrintUrlSafe:function(e){var r=new t(e);return"https:"===r.protocol&&"https://"+r.hostname===this.getBaseUrl()},getBaseUrl:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?l:a},getApiKey:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?u:p},getCartUrl:function(){return this.getBaseUrl()+c},fetchCartCount:function(){var e=this.getBaseUrl()+"/api/v2/cart?APIKey="+this.getApiKey();return n.get(e).withCredentials().set("Accept","application/json").then((function(e){return{count:e&&e.body.Response.Cart?e.body.Response.Cart.ItemCount:0}})).catch((function(e){throw i.error("Error fetching cart count",{err:e}),e}))},fetchOrder:function(e){var r=this.getBaseUrl()+"/api/v2/order/"+e+"?_expand=OrderBillingAddress&APIKey="+this.getApiKey();return n.get(r).withCredentials().set("Accept","application/json").then((function(r){var t="/api/v2/order/"+e+"!billingaddress",i=r.body.Response.Order,n=r.body.Expansions[t];return{orderId:i.OrderID,orderUrl:i.WebUri,email:n.OrderBillingAddress.Email}}))},getRegisterPrintErrorCodeMessage:function(e){var r=e?e.toString():"";return o.hasOwnProperty(r)?s.intlMessage({intlName:o[r]}):s.intlMessage({intlName:o.default})}}}}),"@VERSION@",{requires:[],optionalRequires:["hermes-core"]});YUI.add("math-helper",(function(e){e.MathHelper=function(e){return{seedRandom:function(e){return 0+1*((e=(9301*e+49297)%233280)/233280)}}}}),"@VERSION@",{requires:[]});YUI.add("hermes-template-slim-footer",(function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){var s=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'\t\t<a  class="trustarc-cookie-pref-link" href="/help/cookies">'+e.escapeExpression((s(n,"intlMessage")||a&&s(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"policy-terms.COOKIES"},data:t,loc:{start:{line:12,column:61},end:{line:12,column:108}}}))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,a,n,l,t){var s,o=null!=a?a:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,m=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="slim-footer">\n\t<a href="/about" data-track="footer-about">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:t,loc:{start:{line:2,column:44},end:{line:2,column:83}}}))+'</a>\n\t<a href="/jobs" data-track="footer-jobs">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.JOBS"},data:t,loc:{start:{line:3,column:42},end:{line:3,column:80}}}))+'</a>\n\t<a target="_blank" href="//blog.flickr.net/en" data-track="footer-blog">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.BLOG"},data:t,loc:{start:{line:4,column:73},end:{line:4,column:111}}}))+'</a>\n\t<a href="/services/developer" data-track="footer-developers">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:t,loc:{start:{line:5,column:62},end:{line:5,column:106}}}))+'</a>\n\t<a href="/help/guidelines" data-track="footer-guidelines">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:t,loc:{start:{line:6,column:59},end:{line:6,column:103}}}))+'</a>\n\t<a target="_blank" href="//flickrhelp.com" data-track="footer-help">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:t,loc:{start:{line:7,column:69},end:{line:7,column:107}}}))+'</a>\n\t<a href="/help/forum" data-track="footer-forum">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:t,loc:{start:{line:8,column:49},end:{line:8,column:93}}}))+'</a>\n\t<a href="/help/privacy" data-track="footer-privacy">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:t,loc:{start:{line:9,column:53},end:{line:9,column:94}}}))+'</a>\n\t<a href="/help/terms" data-track="footer-terms">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:t,loc:{start:{line:10,column:49},end:{line:10,column:88}}}))+"</a>\n"+(null!=(s=(m(n,"isFlipped")||a&&m(a,"isFlipped")||i).call(o,"enable-cookie-consent-execution-hermes",{name:"isFlipped",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:11,column:1},end:{line:13,column:15}}}))?s:"")+'\t<div class="foot-li lang-switcher">\n\t\t<a href="/change_language.gne?lang='+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"code"):s,a))+"&csrf="+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"csrf"):s,a))+'" data-track="footer-language">'+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"name"):s,a))+'</a>\n\t\t<div class="arrow">\n\t\t\t<svg class="icon icon-caret-down"><use xlink:href="#icon-caret-down"></use></svg>\n\t\t</div>\n\t </div>\n</div>\n\t\n'},useData:!0}),l={};e.Array.each([],(function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)})),e.Template.register("hermes/slim-footer",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(l,t.partials):l,n(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("slim-footer-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.footerHelper=new e.FooterHelper(this.appContext,{}),this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),t=this.footerHelper.getTemplateParams(),YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,t.requiresCookieConsent=!0,this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")&&(t.requiresCookieConsent=this.appContext.requiresCookieConsent),this.setContainerWithTemplate("slim-footer",t),this},activate:function(){var e,t=this,r=this.get("container");return this.registerEventHandler(r.delegate("click",(function(r){e=r.target.ancestor(".lang-switcher",!0),r.preventDefault(),t.footerHelper.createDropAround(e,t)}),".lang-switcher")),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-slim-footer","url-helper","footer-helper"],langBundles:["common","policy-terms"]});